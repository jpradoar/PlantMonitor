{"version":3,"sources":["../src/imageit_ctrl.js"],"names":["isEqualTo","a","b","undefined","isGreaterThan","isLessThan","getMappingOperators","mappingOperators","getRandomId","Math","random","toString","substr","ValueColorMapping","id","name","operatorName","compareTo","isSensorFontBold","fontColor","bgColor","nameBlink","valueBlink","bgBlink","Sensor","metric","xlocation","ylocation","format","size","visible","renderValue","valueFormatted","valueUnit","displayName","link_url","resolvedLink","rectangular","valueMappingIds","isBold","normalizeColor","color","toLowerCase","_","MetricsPanelCtrl","getWidth","interact","panelDefaults","colorMappings","colorMappingMap","valueMappings","metricValues","seriesList","series","bgimage","sensors","height","width","templateSrv","sizecoefficient","uncache","operator","fn","isTheFirstRender","ImageItCtrl","$scope","$injector","$sce","defaults","panel","events","on","onInitEditMode","bind","render","onDataReceived","dataList","dataListLength","length","push","target","value","datapoints","refreshImage","index","splice","sensor","addEditorTab","scope","elem","attrs","ctrl","panelContainer","find","image","querySelector","metricMap","keyBy","valueMappingsMap","mapping","mappingOperatorsMap","hasOwnProperty","imageWidth","offsetWidth","sensorWidth","font","panelWidth","ylocationStr","xlocationStr","sizeStr","borderRadius","replace","effectiveName","mValue","valueMapping","mappingOperatorName","mappingId","mappingOperator","realFontColor","realBgColor","normalizeSensor","sprintf","dragEventSetup","window","draggable","inertia","restrict","restriction","endOnly","elementRect","top","left","bottom","right","autoScroll","onmove","event","x","parseFloat","getAttribute","dx","y","dy","style","webkitTransform","transform","setAttribute","onend","imageHeight","offsetHeight","xpercentage","ypercentage","newX","parseInt","round","newY","renderingCompleted","ColorMapping","refreshColorMappings","split","map","startsWith","endsWith","icon","indexOf","repeatCount","repeat","slice","imgUrl","imgWidth","imgHeight","join","trustAsHtml","templateUrl"],"mappings":"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","sourcesContent":["import _ from \"lodash\";\r\nimport {\r\n    MetricsPanelCtrl\r\n} from \"app/plugins/sdk\";\r\nimport \"./sprintf.js\";\r\nimport \"./angular-sprintf.js\";\r\nimport getWidth from './stringwidth/strwidth.js';\r\nimport interact from './libs/interact';\r\n\r\nconst panelDefaults = {\r\n    colorMappings: [],\r\n    colorMappingMap: [],\r\n    valueMappings: [],\r\n    metricValues: [],\r\n    seriesList: [],\r\n    series: [],\r\n    bgimage: '',\r\n    sensors: [],\r\n    height: '400px',\r\n    width: '100px',\r\n    templateSrv: null,\r\n    sizecoefficient: 20,\r\n    //uncache is a random number added to the img url to refresh it\r\n    uncache: 0\r\n};\r\n\r\nconst mappingOperators = [{\r\n    name: 'equal',\r\n    operator: '=',\r\n    fn: isEqualTo\r\n}, {\r\n    name: 'greaterThan',\r\n    operator: '>',\r\n    fn: isGreaterThan\r\n}, {\r\n    name: 'lessThan',\r\n    operator: '<',\r\n    fn: isLessThan\r\n}]\r\n\r\nlet isTheFirstRender = true\r\n\r\nexport class ImageItCtrl extends MetricsPanelCtrl {\r\n\r\n    constructor($scope, $injector, $sce, templateSrv) {\r\n        super($scope, $injector);\r\n        _.defaults(this.panel, panelDefaults);\r\n        this.templateSrv = templateSrv;\r\n        this.$sce = $sce;\r\n        this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\r\n        this.events.on('panel-initialized', this.render.bind(this));\r\n        this.events.on('data-received', this.onDataReceived.bind(this));\r\n        this.events.on('data-snapshot-load', this.onDataReceived.bind(this));\r\n    }\r\n\r\n    onDataReceived(dataList) {\r\n        const dataListLength = dataList.length;\r\n        this.panel.metricValues = [];\r\n        for (let series = 0; series < dataListLength; series++) {\r\n            this.panel.metricValues.push({\r\n                name: dataList[series].target,\r\n                value: dataList[series].datapoints[dataList[series].datapoints.length - 1][0]\r\n            });\r\n        }\r\n\r\n        if (!isTheFirstRender) {\r\n            this.refreshImage()\r\n        } else {\r\n            isTheFirstRender = false\r\n        }\r\n\r\n\r\n        this.render();\r\n    }\r\n\r\n    refreshImage() {\r\n        this.panel.uncache = Math.random()\r\n    }\r\n\r\n    deleteSensor(index) {\r\n        this.panel.sensors.splice(index, 1);\r\n    }\r\n\r\n    addSensor() {\r\n        this.panel.sensors.push(\r\n            new Sensor('A', 50, 25, '%.2f', 'rgba(64,64,64,1.000)', 'rgba(255,255,255,1.000)', 14, true)\r\n        );\r\n    }\r\n\r\n    moveSensorUp(index) {\r\n        const sensor = this.panel.sensors[index]\r\n        this.panel.sensors.splice(index, 1)\r\n        this.panel.sensors.splice(index - 1, 0, sensor);\r\n    }\r\n\r\n    moveSensorDown(index) {\r\n        const sensor = this.panel.sensors[index]\r\n        this.panel.sensors.splice(index, 1)\r\n        this.panel.sensors.splice(index + 1, 0, sensor);\r\n    }\r\n\r\n    onInitEditMode() {\r\n        this.addEditorTab('Sensor', 'public/plugins/pierosavi-imageit-panel/editor.html', 2);\r\n        this.addEditorTab('Value Mapping', 'public/plugins/pierosavi-imageit-panel/mappings.html', 3);\r\n    }\r\n\r\n    link(scope, elem, attrs, ctrl) {\r\n        const panelContainer = (elem.find('.pierosavi-imageit-panel')[0]);\r\n        const image = (panelContainer.querySelector('#imageit-image'))\r\n\r\n        function render() {\r\n\r\n            if (!ctrl.panel.sensors) {\r\n                return;\r\n            }\r\n\r\n            let metricMap = _.keyBy(ctrl.panel.metricValues, value => value.name);\r\n            let valueMappingsMap = _.keyBy(ctrl.panel.valueMappings, mapping => mapping.id);\r\n            let mappingOperatorsMap = _.keyBy(mappingOperators, operator => operator.name);\r\n\r\n            for (let sensor of ctrl.panel.sensors) {\r\n\r\n                if (!sensor.hasOwnProperty('id')) {\r\n                    sensor.id = getRandomId()\r\n                }\r\n\r\n                if (image != null) {\r\n                    let imageWidth = image.offsetWidth;\r\n                    sensor.size = imageWidth * ctrl.panel.sizecoefficient / 1600\r\n                }\r\n\r\n                const sensorWidth = getWidth(sensor.displayName, {\r\n                    font: 'Arial',\r\n                    size: sensor.size\r\n                }) + 20;\r\n\r\n                sensor.panelWidth = sensorWidth + \"px\";\r\n                sensor.width = sensorWidth;\r\n\r\n                sensor.ylocationStr = sensor.ylocation.toString() + \"px\";\r\n                sensor.xlocationStr = sensor.xlocation.toString() + \"px\";\r\n\r\n                sensor.sizeStr = sensor.size.toString() + \"px\";\r\n\r\n                if (sensor.rectangular) {\r\n                    sensor.borderRadius = '5%'\r\n                } else {\r\n                    sensor.borderRadius = '50%'\r\n                }\r\n\r\n                if (sensor.link_url != undefined) {\r\n                    sensor.resolvedLink = ctrl.templateSrv.replace(sensor.link_url);\r\n                }\r\n\r\n                //We need to replace possible variables in the sensors name\r\n                const effectiveName = ctrl.templateSrv.replace(sensor.metric);\r\n\r\n                let mValue = metricMap[effectiveName];\r\n                if (mValue === undefined) {\r\n                    mValue = {\r\n                        name: \"dummy\",\r\n                        value: 'null'\r\n                    };\r\n                }\r\n\r\n                // update existing valueMappings\r\n                for (let valueMapping of ctrl.panel.valueMappings) {\r\n                    if (valueMapping.mappingOperatorName == null) {\r\n                        valueMapping.mappingOperatorName = mappingOperators[0].name\r\n                    }\r\n\r\n                    if (valueMapping.id == null) {\r\n                        valueMapping.id = getRandomId()\r\n                    }\r\n\r\n                }\r\n\r\n                sensor.valueMappingIds == undefined ? sensor.valueMappingIds = [] : ''\r\n\r\n                if(sensor.valueMappingIds.length > 0) {\r\n                    for (const mappingId of sensor.valueMappingIds) {\r\n                        const valueMapping = valueMappingsMap[mappingId]\r\n    \r\n                        if (valueMapping === undefined) {\r\n                            break\r\n                        }\r\n    \r\n                        const mappingOperator = mappingOperatorsMap[valueMapping.mappingOperatorName]\r\n    \r\n                        if (mappingOperator.fn(mValue.value, valueMapping.compareTo)) {\r\n    \r\n                            sensor.realFontColor = valueMapping.fontColor\r\n                            sensor.realBgColor = valueMapping.bgColor\r\n    \r\n                            sensor.nameBlink = valueMapping.nameBlink\r\n                            sensor.valueBlink = valueMapping.valueBlink\r\n                            sensor.bgBlink = valueMapping.bgBlink\r\n    \r\n                            sensor.isBold = valueMapping.isSensorFontBold\r\n    \r\n                            break\r\n                        } else {\r\n                            normalizeSensor(sensor)\r\n\r\n                        }\r\n    \r\n                    }\r\n                } else {\r\n                    normalizeSensor(sensor)\r\n\r\n                }\r\n\r\n\r\n                //finally format the value itself\r\n                sensor.valueFormatted = sprintf(sensor.format, mValue.value);\r\n            }\r\n\r\n            dragEventSetup();\r\n\r\n        }\r\n\r\n        function normalizeSensor(sensor) {\r\n            // new sensor property so it doesn't lose the original one \r\n            // https://github.com/pierosavi/pierosavi-imageit-panel/issues/4\r\n            sensor.realBgColor = sensor.bgColor\r\n            sensor.realFontColor = sensor.fontColor\r\n\r\n            sensor.nameBlink = false\r\n            sensor.valueBlink = false\r\n            sensor.bgBlink = false\r\n\r\n            sensor.isBold = false\r\n        }\r\n\r\n        function dragEventSetup() {\r\n            window.interact('#imageit_panel' + ctrl.panel.id + '_sensor').draggable({\r\n                // I dont like it personally but this could be configurable in the future\r\n                inertia: false,\r\n                restrict: {\r\n                    restriction: \"#draggableparent\",\r\n                    endOnly: true,\r\n                    elementRect: {\r\n                        top: 0,\r\n                        left: 0,\r\n                        bottom: 1,\r\n                        right: 1\r\n                    }\r\n                },\r\n                autoScroll: true,\r\n                onmove: function (event) {\r\n                    const target = event.target,\r\n                        // keep the dragged position in the data-x/data-y attributes\r\n                        x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,\r\n                        y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;\r\n\r\n                    // translate the element\r\n                    target.style.webkitTransform =\r\n                        target.style.transform =\r\n                        'translate(' + x + 'px, ' + y + 'px)';\r\n\r\n                    // update the position attributes\r\n                    target.setAttribute('data-x', x);\r\n                    target.setAttribute('data-y', y);\r\n\r\n                },\r\n                onend: function (event) {\r\n                    const target = event.target;\r\n\r\n                    let imageHeight = image.offsetHeight;\r\n                    let imageWidth = image.offsetWidth;\r\n\r\n                    let x = target.getAttribute('data-x');\r\n                    let y = target.getAttribute('data-y')\r\n\r\n                    // get percentage of relative distance from starting point \r\n                    let xpercentage = (x * 100) / imageWidth;\r\n                    let ypercentage = (y * 100) / imageHeight;\r\n\r\n                    // browsers dont render more than 4 decimals so better cut away the others\r\n                    let newX = parseInt(target.style.left) + xpercentage;\r\n                    newX = Math.round(newX * 10000) / 10000\r\n\r\n                    let newY = parseInt(target.style.top) + ypercentage;\r\n                    newY = Math.round(newY * 10000) / 10000\r\n\r\n                    target.style.webkitTransform =\r\n                        target.style.transform =\r\n                        'translate(0px, 0px)';\r\n\r\n                    // manually set the new style so I don't need to render() again\r\n                    target.style.left = newX + '%'\r\n                    target.style.top = newY + '%'\r\n\r\n                    // really update the sensor values\r\n\r\n                    //find sensor with the id from the refId attribute on html\r\n                    let sensor = _.find(ctrl.panel.sensors, {\r\n                        'id': (event.target).getAttribute('refId')\r\n                    })\r\n\r\n                    sensor.xlocation = newX\r\n                    sensor.ylocation = newY\r\n\r\n                    // reset the starting sensor points\r\n                    target.setAttribute('data-x', 0);\r\n                    target.setAttribute('data-y', 0);\r\n                }\r\n            });\r\n        }\r\n\r\n        this.events.on('render', function () {\r\n            render();\r\n            ctrl.renderingCompleted();\r\n        });\r\n    }\r\n\r\n    //------------------\r\n    // Color mapping stuff\r\n    //------------------\r\n\r\n    addColorMapping() {\r\n        this.panel.colorMappings.push(new ColorMapping('name', '#FFFFFF'));\r\n        this.refreshColorMappings();\r\n    }\r\n\r\n    removeColorMapping(index) {\r\n        this.panel.colorMappings.splice(index, 1);\r\n        this.refreshColorMappings();\r\n    }\r\n\r\n    refreshColorMappings() {\r\n        this.panel.colorMappingMap = _.keyBy(this.panel.colorMappings, mapping => mapping.name);\r\n        this.render();\r\n    }\r\n\r\n\r\n    //------------------\r\n    // Mapping stuff\r\n    //------------------\r\n\r\n    addValueMappingMap() {\r\n        this.panel.valueMappings.push(new ValueColorMapping());\r\n    }\r\n\r\n    removeValueMappingMap(index) {\r\n        this.panel.valueMappings.splice(index, 1);\r\n        this.render();\r\n    }\r\n\r\n    replaceTokens(value) {\r\n\r\n        if (!value) {\r\n            return value;\r\n        }\r\n        value = value + \"\";\r\n        value = value.split(\" \").map(a => {\r\n            if (a.startsWith(\"_fa-\") && a.endsWith(\"_\")) {\r\n                let icon = a.replace(/\\_/g, \"\").split(\",\")[0];\r\n                let color = a.indexOf(\",\") > -1 ? ` style=\"color:${normalizeColor(a.replace(/\\_/g, \"\").split(\",\")[1])}\" ` : \"\";\r\n                let repeatCount = a.split(\",\").length > 2 ? +(a.replace(/\\_/g, \"\").split(\",\")[2]) : 1;\r\n                a = `<i class=\"fa ${icon}\" ${color}></i> `.repeat(repeatCount);\r\n\r\n            } else if (a.startsWith(\"_img-\") && a.endsWith(\"_\")) {\r\n                a = a.slice(0, -1);\r\n                let imgUrl = a.replace(\"_img-\", \"\").split(\",\")[0];\r\n                let imgWidth = a.split(\",\").length > 1 ? a.replace(\"_img-\", \"\").split(\",\")[1] : \"20px\";\r\n                let imgHeight = a.split(\",\").length > 2 ? a.replace(\"_img-\", \"\").split(\",\")[2] : \"20px\";\r\n                let repeatCount = a.split(\",\").length > 3 ? +(a.replace(\"_img-\", \"\").split(\",\")[3]) : 1;\r\n                a = `<img width=\"${imgWidth}\" height=\"${imgHeight}\" src=\"${imgUrl}\"/>`.repeat(repeatCount);\r\n            }\r\n            return a;\r\n        }).join(\" \");\r\n\r\n        return this.$sce.trustAsHtml(value);\r\n    }\r\n\r\n    getMappingOperators() {\r\n        return getMappingOperators()\r\n    }\r\n\r\n}\r\n\r\nfunction isEqualTo(a, b) {\r\n    return (a !== undefined && b !== undefined) ? a == b : false\r\n}\r\n\r\nfunction isGreaterThan(a, b) {\r\n    return (a !== undefined && b !== undefined) ? a > b : false\r\n}\r\n\r\nfunction isLessThan(a, b) {\r\n    return (a !== undefined && b !== undefined) ? a < b : false\r\n}\r\n\r\nfunction getMappingOperators() {\r\n    return mappingOperators\r\n}\r\n\r\nfunction getRandomId() {\r\n    return '_' + Math.random().toString(36).substr(2, 9);\r\n};\r\n\r\nfunction ValueColorMapping() {\r\n    'use strict';\r\n    // TODO: check if it doesnt exist yet\r\n    this.id = getRandomId()\r\n    this.name = undefined\r\n    this.operatorName = mappingOperators[0].name\r\n    this.compareTo = undefined\r\n    this.isSensorFontBold = false\r\n    this.fontColor = '#000'\r\n    this.bgColor = '#fff'\r\n    this.nameBlink = false\r\n    this.valueBlink = false\r\n    this.bgBlink = false\r\n}\r\n\r\nfunction Sensor(metric,\r\n    xlocation,\r\n    ylocation,\r\n    format,\r\n    bgColor,\r\n    fontColor,\r\n    size,\r\n    visible) {\r\n    'use strict';\r\n    this.metric = metric;\r\n    this.xlocation = xlocation;\r\n    this.ylocation = ylocation;\r\n    this.format = format;\r\n    this.bgColor = bgColor;\r\n    this.fontColor = fontColor;\r\n    this.size = size;\r\n    this.visible = visible;\r\n    this.renderValue = false;\r\n    this.valueFormatted = '';\r\n    this.valueUnit = '';\r\n    this.displayName = '';\r\n    this.link_url = '';\r\n    this.resolvedLink = '';\r\n    this.rectangular = true;\r\n    this.valueMappingIds = []\r\n    this.isBold = false\r\n    this.id = getRandomId()\r\n}\r\n\r\nfunction normalizeColor(color) {\r\n\r\n    if (color.toLowerCase() === \"green\") {\r\n        return \"rgba(50, 172, 45, 0.97)\";\r\n    } else if (color.toLowerCase() === \"orange\") {\r\n        return \"rgba(237, 129, 40, 0.89)\";\r\n    } else if (color.toLowerCase() === \"red\") {\r\n        return \"rgba(245, 54, 54, 0.9)\";\r\n    } else {\r\n        return color.toLowerCase();\r\n    }\r\n};\r\n\r\nImageItCtrl.templateUrl = 'module.html';"],"file":"imageit_ctrl.js"}